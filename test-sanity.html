<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sanity Test</title>
    <style>
        body {
            font-family: monospace;
            padding: 20px;
            background: #1e1e1e;
            color: #00ff00;
        }
        .result {
            margin: 10px 0;
            padding: 10px;
            background: #2d2d2d;
            border-left: 3px solid #00ff00;
        }
        .error {
            border-left-color: #ff0000;
            color: #ff6666;
        }
    </style>
</head>
<body>
    <h1>Sanity Connection Test</h1>
    <div id="output"></div>

    <script type="module">
        import {createClient} from 'https://esm.sh/@sanity/client@6.11.2'

        const output = document.getElementById('output');

        function log(message, isError = false) {
            const div = document.createElement('div');
            div.className = isError ? 'result error' : 'result';
            div.textContent = message;
            output.appendChild(div);
            console.log(message);
        }

        async function test() {
            log('üîç Testing Sanity connection...');

            try {
                log('‚úì Sanity client library loaded via ES modules');

                const client = createClient({
                    projectId: '6ae0om2j',
                    dataset: 'production',
                    apiVersion: '2024-01-01',
                    useCdn: true,
                });

                log('‚úì Client created successfully');

                // Test fetch
                log('üì° Fetching hero data...');
                const hero = await client.fetch('*[_type == "hero"][0]');
                log(`‚úì Hero data received: ${JSON.stringify(hero, null, 2)}`);

                log('üì° Fetching experience cards...');
                const cards = await client.fetch('*[_type == "experienceCard"] | order(order asc)');
                log(`‚úì Found ${cards.length} experience cards`);

                log('\n‚úÖ All tests passed! Sanity is working correctly.');

            } catch (error) {
                log(`‚ùå Error: ${error.message}`, true);
                log(`Stack: ${error.stack}`, true);
            }
        }

        test();
    </script>
</body>
</html>
